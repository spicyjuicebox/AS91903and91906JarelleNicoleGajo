{% extends "template.html" %} {% block title %}Order{% endblock %}

{% block content %}
<!-- Bootstrap Carousel -->
<div id="hero-carousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#hero-carousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#hero-carousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
    </div>
    <div class="carousel-inner">
        <div class="carousel-item active c-item">
            <img src="{{ url_for('static', filename='assets/img/foodorderslide1.jpeg') }}" class="d-block w-100 c-img" alt="Slide 1">
            <div class="carousel-caption top-0 mt-3">
                <h2 class="text-uppercase">Start your order</h2>
                <h1 class="display-1 fw-bolder text-capitalize">Here!</h1>
            </div>
        </div>
        <div class="carousel-item c-item">
            <img src="{{ url_for('static', filename='assets/img/foodorderslide2.jpg') }}" class="d-block w-100 c-img" alt="Slide 2">
            <div class="carousel-caption top-0 mt-3">
                <h2 class="text-uppercase">Make sure to</h2>
                <h1 class="display-1 fw-bolder text-capitalize">Pick it up!</h1>
            </div>
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#hero-carousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#hero-carousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>
<!-- End Bootstrap Carousel -->

<!-- Ordering Section -->
<section id="foodlist" class="mt-5">
    <div class="container">
        <div class="row">
            <!-- Food List -->
            <div class="col-md-8">
                <h1 class="section-title smctuckshopfoodmenu"><span>SMC T</span>uckshop <span>F</span>ood <span>M</span>enu</h1>
                <div class="accordion" id="foodAccordion">
                    <!-- Meal of the Day -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingOne">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#mealofthedayCollapse" aria-expanded="true" aria-controls="mealofthedayCollapse">
                                Meal of the Day
                            </button>
                        </h2>
                        <div id="mealofthedayCollapse" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#foodAccordion">
                            <div class="accordion-body">
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/sandwich.jpg') }}" class="img-thumbnail" alt="Macaroni and Cheese">
                                        </div>
                                        <h5 class="mt-2 text-center">Monday: Macaroni and Cheese</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Monday: Macaroni and Cheese [$6.00]" data-price="6.00">+ $6.00</button>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/sausage.jpg') }}" class="img-thumbnail" alt="Burritos">
                                        </div>
                                        <h5 class="mt-2 text-center">Tuesday: Burritos</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Tuesday: Burritos [$6.00]" data-price="6.00">+ $6.00</button>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/burrito.jpg') }}" class="img-thumbnail" alt="Sushi">
                                        </div>
                                        <h5 class="mt-2 text-center">Wednesday: Sushi</h5>
                                        <h5 class="mt-2 text-center">Chicken, Salmon, Veggie, Teriyaki, Onigiri</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Wednesday: Sushi (Chicken) [$6.00]" data-price="6.00">+ $6.00 (Chicken)</button>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Wednesday: Sushi (Salmon) [$6.00]" data-price="6.00">+ $6.00 (Salmon)</button>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Wednesday: Sushi (Veggie) [$6.00]" data-price="6.00">+ $6.00 (Veggie)</button>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Wednesday: Sushi (Teriyaki) [$6.00]" data-price="6.00">+ $6.00 (Teriyaki)</button>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Wednesday: Sushi (Onigiri) [$6.00]" data-price="6.00">+ $6.00 (Onigiri)</button>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/burrito.jpg') }}" class="img-thumbnail" alt="Buttered Chicken">
                                        </div>
                                        <h5 class="mt-2 text-center">Thursday: Buttered Chicken</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Thursday: Buttered Chicken [$6.00]" data-price="6.00">+ $6.00</button>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/burrito.jpg') }}" class="img-thumbnail" alt="Loaded Wedges">
                                        </div>
                                        <h5 class="mt-2 text-center">Friday: Loaded Wedges</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Friday: Loaded Wedges [$6.00]" data-price="6.00">+ $6.00</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Hot Food -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="headingTwo">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#hotfoodCollapse" aria-expanded="true" aria-controls="hotfoodCollapse">
                                Hot Food
                            </button>
                        </h2>
                        <div id="hotfoodCollapse" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#foodAccordion">
                            <div class="accordion-body">
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/sandwich.jpg') }}" class="img-thumbnail" alt="All Pies">
                                        </div>
                                        <h5 class="mt-2 text-center">All Pies</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Pie: Potato Top [$5.00]" data-price="5.00">+ $5.00 (Potato Top)</button>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Pie: Mince & Cheese [$5.00]" data-price="5.00">+ $5.00 (Mince & Cheese)</button>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Pie: Steak [$5.00]" data-price="5.00">+ $5.00 (Steak)</button>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Pie: Steak & Cheese [$5.00]" data-price="5.00">+ $5.00 (Steak & Cheese)</button>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/sausage.jpg') }}" class="img-thumbnail" alt="Ham & Cheese Toastie">
                                        </div>
                                        <h5 class="mt-2 text-center">Ham & Cheese Toastie</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Ham & Cheese Toastie [$4.00]" data-price="4.00">+ $4.00</button>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/burrito.jpg') }}" class="img-thumbnail" alt="Sausage Roll">
                                        </div>
                                        <h5 class="mt-2 text-center">Sausage Roll</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Sausage Roll [$2.50]" data-price="2.50">+ $2.50</button>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/burrito.jpg') }}" class="img-thumbnail" alt="Steamed Bun">
                                        </div>
                                        <h5 class="mt-2 text-center">Steamed Bun</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Steamed Bun [$4.50]" data-price="4.50">+ $4.50</button>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/burrito.jpg') }}" class="img-thumbnail" alt="Noodles">
                                        </div>
                                        <h5 class="mt-2 text-center">Noodles</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Noodles [$4.00]" data-price="4.00">+ $4.00</button>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/burrito.jpg') }}" class="img-thumbnail" alt="Hot Dog">
                                        </div>
                                        <h5 class="mt-2 text-center">Hot Dog</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Hot Dog [$4.50]" data-price="4.50">+ $4.50</button>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/sandwich.jpg') }}" class="img-thumbnail" alt="All Subs">
                                        </div>
                                        <h5 class="mt-2 text-center">All Subs</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Hot Chicken Sub [$5.50]" data-price="5.50">+ $5.50 (Hot Chicken Sub)</button>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Pork Rib Sub [$5.50]" data-price="5.50">+ $5.50 (Pork Rib Sub)</button>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Meatball Sub [$5.50]" data-price="5.50">+ $5.50 (Meatball Sub)</button>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/burrito.jpg') }}" class="img-thumbnail" alt="Bacon & Egg Roll">
                                        </div>
                                        <h5 class="mt-2 text-center">Bacon & Egg Roll</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Bacon & Egg Roll [$5.50]" data-price="5.50">+ $5.50</button>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/burrito.jpg') }}" class="img-thumbnail" alt="Burger">
                                        </div>
                                        <h5 class="mt-2 text-center">Burger</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Burger [$5.50]" data-price="5.50">+ $5.50</button>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/burrito.jpg') }}" class="img-thumbnail" alt="Garlic Bread">
                                        </div>
                                        <h5 class="mt-2 text-center">Garlic Bread</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Garlic Bread [$2.50]" data-price="2.50">+ $2.50</button>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/burrito.jpg') }}" class="img-thumbnail" alt="Bacon & Egg Muffin">
                                        </div>
                                        <h5 class="mt-2 text-center">Bacon & Egg Muffin</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Bacon & Egg Muffin [$4.00]" data-price="4.00">+ $4.00</button>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="square-image">
                                            <img src="{{ url_for('static', filename='assets/img/burrito.jpg') }}" class="img-thumbnail" alt="Hash Brown">
                                        </div>
                                        <h5 class="mt-2 text-center">Hash Brown</h5>
                                        <button class="btn btn-primary add-to-order mt-2" data-topping="Hash Brown [$2.00]" data-price="2.00">+ $2.00</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Cart Section -->
            <!-- Added Section -->
            <!-- Cart Section -->
            <div class="col-md-4">
                <h1 class="section-title"><span>C</span>art</h1>
                <ul class="list-group" id="cart">
                    <!-- Added -->
                </ul>
                <!-- Total Price for the Cart Summary -->
                <!-- The total-price will change -->
                <h3 class="mt-3">Total: $<span id="total-price">0.00</span></h3>
                <button class="btn btn-success mt-3 w-100" id="place-order">Place Order</button>
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const cart = document.getElementById('cart');
        const totalPriceElement = document.getElementById('total-price');
    
        function updateTotalPrice() {
            let totalPrice = 0;
            cart.querySelectorAll('.list-group-item').forEach(item => {
                const price = parseFloat(item.getAttribute('data-price'));
                totalPrice += price;
            });
            totalPriceElement.textContent = totalPrice.toFixed(2);
        }
    
        document.querySelectorAll('.add-to-order').forEach(button => {
            button.addEventListener('click', function (event) {
                event.preventDefault();
                const topping = this.getAttribute('data-topping');
                const price = parseFloat(this.getAttribute('data-price')); /* Gets the price of what is in the data-price for each button pressed. */
    
                const listItem = document.createElement('li');
                listItem.classList.add('list-group-item', 'd-flex', 'justify-content-between', 'align-items-center');
                listItem.textContent = topping;
                listItem.setAttribute('data-price', price);
    
                const removeButton = document.createElement('button');
                removeButton.classList.add('btn', 'btn-danger', 'btn-sm');
                removeButton.textContent = 'Remove';
                removeButton.addEventListener('click', function () {
                    cart.removeChild(listItem);
                    updateTotalPrice();
                });
    
                listItem.appendChild(removeButton);
                cart.appendChild(listItem);
                updateTotalPrice();
            });
        });
    
        document.getElementById('place-order').addEventListener('click', function () {
            const items = [];
            let totalPrice = 0;
    
            cart.querySelectorAll('.list-group-item').forEach(item => {
                items.push(item.textContent.replace('Remove', '').trim());
                totalPrice += parseFloat(item.getAttribute('data-price'));
            });
    
            window.location.href = "{{ url_for('views.payment_option') }}?order=" + encodeURIComponent(items.join(', ')) + "&total=" + totalPrice.toFixed(2);
        });
    });    
</script>
{% endblock %}